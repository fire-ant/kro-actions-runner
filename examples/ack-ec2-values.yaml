# ACK EC2 Controller Helm values
# Configured to use LocalStack instead of real AWS

# AWS credentials (not needed for LocalStack, but required by the chart)
aws:
  region: us-east-1
  # For LocalStack, these can be dummy values
  credentials:
    secretName: ack-ec2-user-secrets
    secretKey: credentials
    profile: default
  # Configure LocalStack endpoint (HTTPS with self-signed cert)
  endpoint_url: https://localstack.localstack.svc.cluster.local:4566

# Service account
serviceAccount:
  create: true
  name: ack-ec2-controller

# Resources
resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 50m
    memory: 64Mi

# Log level
log:
  level: info
  enable_development_logging: false

# Deployment configuration
deployment:
  # Additional environment variables for SSL certificate handling
  extraEnvVars:
    # Point to LocalStack's CA certificate for TLS verification
    - name: AWS_CA_BUNDLE
      value: "/etc/localstack-ca/server.crt"

  # Mount LocalStack's CA certificate
  extraVolumes:
    - name: localstack-ca
      secret:
        secretName: localstack-tls-certs
        items:
          - key: server.crt
            path: server.crt

  extraVolumeMounts:
    - name: localstack-ca
      mountPath: /etc/localstack-ca
      readOnly: true
